<div class="order__main-container">
  <div class="order__header-container">
    <h2 class="order__header">Orders</h2>
    <button
      mat-raised-button
      color="accent"
      class="order__button"
      (click)="goToProcessOrder()"
    >
      Process Order
    </button>
  </div>
  <div class="order__list-container">
    <div class="order__sub-list-container">
      <div class="spinner-container" *ngIf="dataSource.loading$ | async">
        <mat-spinner></mat-spinner>
      </div>
      <mat-table
        class="mat-elevation-z2 table"
        [dataSource]="dataSource"
        matSort
        matSortActive="date"
        matSortDirection="asc"
        matSortDisableClear
      >
        <ng-container matColumnDef="img">
          <mat-header-cell
            class="header-align-right"
            *matHeaderCellDef
            mat-sort-header
            >Image</mat-header-cell
          >
          <mat-cell *matCellDef="let transaction">
            <img class="img" [src]="transaction.imagePath" alt="" />
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="type">
          <mat-header-cell class="header-align-right" *matHeaderCellDef
            >Trasaction Type</mat-header-cell
          >
          <mat-cell *matCellDef="let transaction">Order</mat-cell>
        </ng-container>

        <ng-container matColumnDef="product">
          <mat-header-cell class="header-align-right" *matHeaderCellDef
            >Product</mat-header-cell
          >

          <mat-cell *matCellDef="let transaction">{{
            transaction.name
          }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="status">
          <mat-header-cell class="header-align-right" *matHeaderCellDef
            >Status</mat-header-cell
          >

          <mat-cell *matCellDef="let transaction">{{
            transaction.transStatus
          }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="date">
          <mat-header-cell class="header-align-right" *matHeaderCellDef
            >Date</mat-header-cell
          >

          <mat-cell *matCellDef="let transaction">{{
            transaction.purchaseTime | date: "yyyy-MM-dd"
          }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="totalPrice">
          <mat-header-cell class="header-align-right" *matHeaderCellDef
            >Amount</mat-header-cell
          >

          <mat-cell *matCellDef="let transaction">{{
            transaction.total | currency
          }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="name" stickyEnd>
          <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>

          <mat-cell *matCellDef="let transaction">
            <a [routerLink]="['./', transaction.id]">View Detail</a>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
      </mat-table>
      <div *ngIf="dataSource.count == 0" class="no_result">
        No order yet
      </div>
      <mat-paginator
        [length]="dataSource.count"
        [pageSize]="5"
        [pageSizeOptions]="[5, 10]"
      ></mat-paginator>
    </div>
  </div>
</div>
